fileGroups:
  scalaSources:
    - "morphir/**/*.scala"
  scalaBuildSources:
    - "build.sc"
    - "project/**/*.{scala,sc}"
    - "mill-build/**/*.{scala,sc}"
tasks:
  scala-format:
    command: |
      ./mill Alias/run fmt
    inputs:
      - "@files(scalaSources)"
      - "@files(scalaBuildSources)"
  scala-lint:
    command: |
      ./mill Alias/run checkfmt
    inputs:
      - "@files(scalaSources)"
      - "@files(scalaBuildSources)"
  scala-test-jvm:
    command: |
      ./mill morphir.__.jvm.__.test
    inputs:
      - "@files(scalaSources)"
      - "@files(scalaBuildSources)"
  scala-test-js:
    command: |
      ./mill morphir.__.js.__.test
    inputs:
      - "@files(scalaSources)"
      - "@files(scalaBuildSources)"
  scala-test-native:
    command: |
      ./mill morphir.__.native.__.test
    inputs:
      - "@files(scalaSources)"
      - "@files(scalaBuildSources)"
  scala-test:
    inputs: []
    deps:
      - target: "~:scala-test-jvm"
        optional: true
      - target: "~:scala-test-js"
        optional: true
      - target: "~:scala-test-native"
        optional: true
tags:
  - "scala"
